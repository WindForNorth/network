## 三、DNS：因特网的目录服务

​		域名系统，提供域名向IP地址的转换

​		DNS是：一个由分层DNS服务器实现的分布式数据库，使得主机能够查询分布式数据库的应用层协议。其运输层协议为UDP，端口号为53

​		DNS工作机理概述：

​		当应用程序需要将域名转换为IP地址的时候，需要执行以下步骤：

1. 应用程序调用主机上的DNS客户端，指明需要转换的主机名
2. 用户主机接收到主机名之后向网络中发送DNS查询报文
3. 用户主机收到回答报文之后，可以通过此IP地址建立与服务器的TCP连接

​		采用分布式的原因（集中式服务器的缺点）：

- 单点故障就会导致整个网络崩溃
- 通信容量非常巨大
- 远距离
- 维护不便

### 1.分布式、层次数据库

​		DNS服务器分类：

- 根DNS服务器：提供顶级域DNS服务器的IP地址（比如.com，.cn等等）
- 顶级域（TLD）DNS服务器：提供权威DNS服务器的IP地址
- 权威DNS服务器：将主机名映射为IP地址（存储着所有以某后缀结尾的主机名的IP地址的映射）

还有一种非正式的本地服务器，它严格来讲不属于这个体系结构，这种DNS服务器将用户的DNS请求发向DNS服务器的体系结构

### 2.DNS缓存

DNS服务器还有缓存功能，当接收到查询时会优先对缓存中的内容进行查询，查看是否有该域名的映射，有就可以快速返回

### 3.DNS记录和报文

​		资源记录：（Name，Value，Type，TTL）

​		Type类型对应的不同意义：

- A，Name为主机名，Value为其IP地址
- NS，Name为域，Value为知道这个域的权威DNS服务器的主机名，自然这个DNS服务器就还得包含一条类型为A的记录，其Value为这个权威DNS服务器的IP地址
- CNAME，Name为别名，Value为其规范主机名
- MX，Name为邮件服务器的别名，Value为其规范主机名